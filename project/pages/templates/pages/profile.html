{% extends 'pages/base.html' %}
{% block content %}
<div class="profile-container">
    {% if user.is_admin %}
        {% include 'pages/admin_dashboard.html' %}
    {% else %}
        <h2>Welcome to Your Profile</h2>
        
        <div class="profile-card">
            <h3>Account Information</h3>
            <p><strong>Username:</strong> {{ user.username }}</p>
            <p><strong>Email:</strong> {{ user.email }}</p>
            <p><strong>Account Type:</strong> {{ user.get_role_display }}</p>
            <p><strong>Member Since:</strong> {{ user.date_joined|date:"F j, Y" }}</p>
        </div>
        
        {% if user.is_traveler %}
        <div class="profile-section">
            <h3>My Travel Plans</h3>
            {% if trip_areas %}
                <div class="trip-areas">
                    {% for trip in trip_areas %}
                    <div class="trip-card">
                        <h4>{{ trip.name }}</h4>
                        {% if trip.description %}
                        <p>{{ trip.description }}</p>
                        {% endif %}
                        <p><strong>Location:</strong> {{ trip.latitude }}, {{ trip.longitude }}</p>
                        <p><strong>Radius:</strong> {{ trip.radius }} km</p>
                        <p><strong>Created:</strong> {{ trip.created_at|date:"F j, Y" }}</p>
                        
                        {% if trip.locations.all %}
                        <div class="trip-locations">
                            <h5>Saved Locations ({{ trip.locations.count }})</h5>
                            <ul>
                                {% for location in trip.locations.all %}
                                <li>{{ location.name }}</li>
                                {% endfor %}
                            </ul>
                        </div>
                        {% endif %}
                    </div>
                    {% endfor %}
                </div>
            {% else %}
                <p>You haven't created any travel plans yet.</p>
            {% endif %}
            <a href="{% url 'map_ui' %}" class="btn">View and Plan Trips</a>
        </div>
        {% endif %}

        {% if user.is_guide %}
        <div class="profile-section">
            <h3>My Tour Offerings</h3>
            <p>You haven't created any tours yet.</p>
            <a href="#" class="btn">Create Tour</a>
        </div>
        {% endif %}
    {% endif %}
</div>
{% endblock %}
